<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition=" '$(MSBuildThisFileDirectory)' != '' ">
    <!-- Note that all these files are identical for CORE and NETFRAMEWORK, as they are just used by SharpSvn -->
    <SharpSvnRuntimeDir>$(MSBuildThisFileDirectory)\..\runtimes\win-x86\lib\netcoreapp\</SharpSvnRuntimeDir>
  </PropertyGroup>

  <ItemGroup Condition=" '$(SharpSvnRuntimeDir)' != '' ">
    <SharpSvnExternalFiles Include="$(SharpSvnRuntimeDir)\*.svnExe" />
    <SharpSvnExternalFiles Include="$(SharpSvnRuntimeDir)\*.svnDll" />
    <SharpSvnExternalFiles Include="$(SharpSvnRuntimeDir)\*.xml" />
  </ItemGroup>

  <ItemGroup Condition="'$(ContentSharpSvnFiles)' != '' And
                        '$(ContentSharpSvnFiles)' != 'false' And
                        '@(SharpSvnExternalFiles)' != ''">
    <Content Include="@(SharpSvnExternalFiles)">
      <Link>%(Filename)%(Extension)</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Visible>false</Visible>
    </Content>
  </ItemGroup>

  <Target Name="SharpSvnCopyExternalFiles" BeforeTargets="Build">
    <Copy
      SourceFiles="@(SharpSvnExternalFiles)"
      DestinationFiles="@(SharpSvnExternalFiles -> '$(OutDir)%(Filename)%(Extension)')"
      SkipUnchangedFiles="true" />
  </Target>

  <Target Name="SharpSvnCleanDbFiles" BeforeTargets="Clean">
    <Delete Files="@(SharpSvnExternalFiles -> '$(OutDir)%(Filename)%(Extension)')" />
  </Target>
</Project>
